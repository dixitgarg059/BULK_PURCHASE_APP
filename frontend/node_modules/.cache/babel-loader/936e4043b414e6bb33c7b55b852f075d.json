{"ast":null,"code":"import _classCallCheck from \"/home/dixit/Desktop/DASS-ASSIGNMENT2/Webapp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/dixit/Desktop/DASS-ASSIGNMENT2/Webapp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/dixit/Desktop/DASS-ASSIGNMENT2/Webapp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/dixit/Desktop/DASS-ASSIGNMENT2/Webapp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/dixit/Desktop/DASS-ASSIGNMENT2/Webapp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/dixit/Desktop/DASS-ASSIGNMENT2/Webapp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/dixit/Desktop/DASS-ASSIGNMENT2/Webapp/frontend/src/components/customer-list-product.component.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nvar ref;\n\nvar LIST_PRODUCT =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(LIST_PRODUCT, _Component);\n\n  function LIST_PRODUCT(props) {\n    var _this;\n\n    _classCallCheck(this, LIST_PRODUCT);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LIST_PRODUCT).call(this, props));\n\n    _this.searchProducts = function () {\n      _this.props.history.push({\n        pathname: '/login/customer/search-products',\n        username: _this.state.username\n      });\n    };\n\n    _this.listProducts = function () {\n      _this.props.history.push({\n        pathname: '/login/customer/list-products',\n        username: _this.state.username\n      });\n    };\n\n    _this.Edit = function (ownername, productname, quantity) {\n      ref.props.history.push({\n        pathname: '/login/customer/list-products/edit-product',\n        customername: ref.state.username,\n        vendorname: ownername,\n        productname: productname,\n        quantity: quantity\n      });\n    };\n\n    _this.RateVendor = function (ownername, productname) {\n      ref.props.history.push({\n        pathname: '/login/customer/list-products/rate-vendor',\n        vendorname: ownername\n      });\n    };\n\n    _this.ProductReview = function (ownername, productname) {\n      ref.props.history.push({\n        pathname: '/login/customer/list-products/product-review',\n        customername: ref.state.username,\n        vendorname: ownername,\n        productname: productname\n      });\n    };\n\n    _this.sortByPrice = function () {\n      var sortedProductsAsc;\n      sortedProductsAsc = _this.state.products.sort(function (a, b) {\n        return parseInt(a.price) - parseInt(b.price);\n      });\n\n      _this.setState({\n        products: sortedProductsAsc\n      });\n    };\n\n    _this.sortByQuantity = function () {\n      var sortedProductsAsc;\n      sortedProductsAsc = _this.state.products.sort(function (a, b) {\n        return parseInt(a.price) - parseInt(b.price);\n      });\n\n      _this.setState({\n        products: sortedProductsAsc\n      });\n    };\n\n    _this.sortByRating = function () {\n      var sortedProductsAsc;\n      sortedProductsAsc = _this.state.products.sort(function (a, b) {\n        return parseInt(a.price) - parseInt(b.price);\n      });\n\n      _this.setState({\n        products: sortedProductsAsc\n      });\n    };\n\n    ref = _assertThisInitialized(_assertThisInitialized(_this));\n    ref.state = {\n      username: ref.props.location.username,\n      products: [],\n      all_products: [],\n      users: []\n    };\n    return _this;\n  }\n\n  _createClass(LIST_PRODUCT, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      axios.get('http://localhost:4000/a1').then(function (response) {\n        ref.setState({\n          products: response.data\n        });\n        axios.get('http://localhost:4000/a').then(function (response) {\n          ref.setState({\n            all_products: response.data\n          });\n        }).catch(function (error) {\n          console.log(error);\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n      axios.get('http://localhost:4000/').then(function (response) {\n        ref.setState({\n          users: response.data\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"nav\", {\n        className: \"navbar navbar-expand-lg navbar-light bg-light\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"collapse navbar-collapse\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        className: \"navbar-nav mr-auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        className: \"navbar-item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"button\",\n        onClick: this.searchProducts,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, \"Search Products\")), React.createElement(\"li\", {\n        className: \"navbar-item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"button\",\n        onClick: this.listProducts,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, \"List Products\"))))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(\"table\", {\n        className: \"table table-striped\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, \"Vendorname\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, \"Productname\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, \"Quantity Ordered\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, \"Vendor Rating\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, \"Status\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, \"Quantity left for the order to get placed\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, ref.state.products.map(function (currentProduct, i) {\n        if (currentProduct.customername === ref.state.username) if (ref.getStatus(currentProduct.productname, currentProduct.vendorname) === \"Waiting\") {\n          return React.createElement(\"tr\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 152\n            },\n            __self: this\n          }, React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 153\n            },\n            __self: this\n          }, currentProduct.vendorname), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 154\n            },\n            __self: this\n          }, currentProduct.productname), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 155\n            },\n            __self: this\n          }, currentProduct.quantity), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 156\n            },\n            __self: this\n          }, ref.getVendorRating(currentProduct.vendorname)), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 157\n            },\n            __self: this\n          }, \"Waiting\"), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 158\n            },\n            __self: this\n          }, ref.getQuantity(currentProduct.productname, currentProduct.vendorname)));\n        } else if (ref.getStatus(currentProduct.productname, currentProduct.vendorname) === \"Placed\") {\n          return React.createElement(\"tr\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 168\n            },\n            __self: this\n          }, React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 169\n            },\n            __self: this\n          }, currentProduct.vendorname), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 170\n            },\n            __self: this\n          }, currentProduct.productname), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 171\n            },\n            __self: this\n          }, currentProduct.quantity), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 172\n            },\n            __self: this\n          }, ref.getVendorRating(currentProduct.vendorname)), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 173\n            },\n            __self: this\n          }, \"Placed\"), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 174\n            },\n            __self: this\n          }, \"0\"), React.createElement(\"button\", {\n            type: \"button\",\n            onClick: function onClick() {\n              return _this2.RateVendor(currentProduct.vendorname, currentProduct.productname);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 175\n            },\n            __self: this\n          }, \"RateVendor\"));\n        } else if (ref.getStatus(currentProduct.productname, currentProduct.vendorname) === \"Dispatched\") {\n          return React.createElement(\"tr\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 187\n            },\n            __self: this\n          }, React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 188\n            },\n            __self: this\n          }, currentProduct.vendorname), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 189\n            },\n            __self: this\n          }, currentProduct.productname), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 190\n            },\n            __self: this\n          }, currentProduct.quantity), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 191\n            },\n            __self: this\n          }, ref.getVendorRating(currentProduct.vendorname)), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 192\n            },\n            __self: this\n          }, \"Dispatched\"), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 193\n            },\n            __self: this\n          }, \"0\"), React.createElement(\"button\", {\n            type: \"button\",\n            onClick: function onClick() {\n              return _this2.ProductReview(currentProduct.vendorname, currentProduct.productname);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 194\n            },\n            __self: this\n          }, \"Review\"));\n        } else {\n          return React.createElement(\"tr\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 203\n            },\n            __self: this\n          }, React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 204\n            },\n            __self: this\n          }, currentProduct.vendorname), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 205\n            },\n            __self: this\n          }, currentProduct.productname), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 206\n            },\n            __self: this\n          }, currentProduct.quantity), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 207\n            },\n            __self: this\n          }, ref.getVendorRating(currentProduct.vendorname)), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 208\n            },\n            __self: this\n          }, ref.getStatus(currentProduct.productname, currentProduct.vendorname)), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 209\n            },\n            __self: this\n          }, \"0\"));\n        }\n      })))));\n    }\n  }, {\n    key: \"getStatus\",\n    value: function getStatus(productname, vendorname) {\n      var st = \"Waiting\";\n\n      for (var i = 0; i < ref.state.all_products.length; i++) {\n        if (ref.state.all_products[i].productname === productname && ref.state.all_products[i].username === vendorname) st = ref.state.all_products[i].status;\n      }\n\n      if (st === \"Ready\") st = \"Placed\";\n      return st;\n    }\n  }, {\n    key: \"getQuantity\",\n    value: function getQuantity(productname, vendorname) {\n      var st = 0;\n\n      for (var i = 0; i < ref.state.all_products.length; i++) {\n        if (ref.state.all_products[i].productname === productname && ref.state.all_products[i].username === vendorname) {\n          st = parseInt(ref.state.all_products[i].quantity) - parseInt(ref.state.all_products[i].count);\n          break;\n        }\n      }\n\n      return st;\n    }\n  }, {\n    key: \"getVendorRating\",\n    value: function getVendorRating(vendorname) {\n      var ret = 0;\n\n      for (var i = 0; i < ref.state.users.length; i++) {\n        if (ref.state.users[i].username === vendorname && ref.state.users[i].type === \"Vendor\") {\n          var sum = ref.state.users[i].sum;\n          var cnt = ref.state.users[i].count;\n          ret = sum / cnt;\n          break;\n        }\n      }\n\n      if (ret == 0) ret = \"Unrated\";\n      return ret;\n    }\n  }]);\n\n  return LIST_PRODUCT;\n}(Component);\n\nexport { LIST_PRODUCT as default };","map":{"version":3,"sources":["/home/dixit/Desktop/DASS-ASSIGNMENT2/Webapp/frontend/src/components/customer-list-product.component.js"],"names":["React","Component","axios","ref","LIST_PRODUCT","props","searchProducts","history","push","pathname","username","state","listProducts","Edit","ownername","productname","quantity","customername","vendorname","RateVendor","ProductReview","sortByPrice","sortedProductsAsc","products","sort","a","b","parseInt","price","setState","sortByQuantity","sortByRating","location","all_products","users","get","then","response","data","catch","error","console","log","map","currentProduct","i","getStatus","getVendorRating","getQuantity","st","length","status","count","ret","type","sum","cnt"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport axios from 'axios';\nlet ref;\nexport default class LIST_PRODUCT extends Component {\n    \n    constructor(props) {\n        super(props);\n        ref=this;\n        ref.state = {\n            username:ref.props.location.username,\n            products: [],\n            all_products:[],\n            users:[]\n        }\n    }\n\n    componentDidMount() {\n        axios.get('http://localhost:4000/a1')\n             .then(response => {\n                ref.setState({products: response.data});\n                axios.get('http://localhost:4000/a')\n                    .then(response => {\n                    ref.setState({all_products: response.data});\n                })\n                    .catch(function(error) {\n                    console.log(error);\n             })\n        \n             })\n             .catch(function(error) {\n                 console.log(error);\n             })\n        \n        axios.get('http://localhost:4000/')\n             .then(response => {\n                 ref.setState({users:response.data});\n             })\n             .catch(function(error){\n                 console.log(error);\n             })\n    }\n    searchProducts=() => {\n    this.props.history.push({\n        pathname:'/login/customer/search-products',\n        username:this.state.username});\n  }\n  listProducts=() => {\n\n      this.props.history.push({\n          pathname:'/login/customer/list-products',\n          username:this.state.username\n      });\n  }\n    Edit=(ownername,productname,quantity) =>{\n        ref.props.history.push({\n            pathname:'/login/customer/list-products/edit-product',\n            customername:ref.state.username,\n            vendorname:ownername,\n            productname:productname,\n            quantity:quantity\n          });\n    }\n    RateVendor=(ownername,productname) =>{\n        ref.props.history.push({\n            pathname:'/login/customer/list-products/rate-vendor',\n            vendorname:ownername\n          });\n    }\n    ProductReview=(ownername,productname) =>{\n        ref.props.history.push({\n            pathname:'/login/customer/list-products/product-review',\n            customername:ref.state.username,\n            vendorname:ownername,\n            productname:productname\n          });\n    }\n    sortByPrice=()=>{\n\n        let sortedProductsAsc;\n        sortedProductsAsc= this.state.products.sort((a,b)=>{\n           return parseInt(a.price)  - parseInt(b.price);\n        })\n\n        this.setState({\n            products:sortedProductsAsc\n        })\n    }\n    sortByQuantity=()=>{\n\n        let sortedProductsAsc;\n        sortedProductsAsc= this.state.products.sort((a,b)=>{\n           return parseInt(a.price)  - parseInt(b.price);\n        })\n\n        this.setState({\n            products:sortedProductsAsc\n        })\n    }\n    sortByRating=()=>{\n\n        let sortedProductsAsc;\n        sortedProductsAsc= this.state.products.sort((a,b)=>{\n           return parseInt(a.price)  - parseInt(b.price);\n        })\n        this.setState({\n            products:sortedProductsAsc\n        })\n    }\n\n    render() {\n        return (\n            <div>\n            <div className=\"container\">\n        <nav className=\"navbar navbar-expand-lg navbar-light bg-light\">\n          <div className=\"collapse navbar-collapse\">\n            <ul className=\"navbar-nav mr-auto\">\n              <li className=\"navbar-item\">\n                <button type=\"button\" onClick={this.searchProducts}>\n                  Search Products\n                </button>\n              </li>\n              <li className=\"navbar-item\">\n                <button type=\"button\" onClick={this.listProducts}>\n                  List Products\n                </button>\n              </li>\n            </ul>\n          </div>\n        </nav>\n        <br/>\n      </div>\n            <div>\n                <table className=\"table table-striped\">\n                    <thead>\n                   \n                    <tr>\n                        <th>Vendorname</th>\n                        <th>Productname</th>\n                        <th>Quantity Ordered</th>\n                        <th>Vendor Rating</th>\n                        <th>Status</th>\n                        <th>Quantity left for the order to get placed</th>\n                    </tr>          \n                    </thead>\n                    <tbody>\n                    { \n                        ref.state.products.map((currentProduct, i) => {\n                            if(currentProduct.customername ===   ref.state.username)\n                            if(ref.getStatus(currentProduct.productname,currentProduct.vendorname) === \"Waiting\")\n                            {\n                                return (\n                                    <tr>\n                                        <td>{currentProduct.vendorname}</td>\n                                        <td>{currentProduct.productname}</td>\n                                        <td>{currentProduct.quantity}</td>\n                                        <td>{ref.getVendorRating(currentProduct.vendorname)}</td>\n                                        <td>Waiting</td>  \n                                        <td>{ref.getQuantity(currentProduct.productname,currentProduct.vendorname)}</td>\n                                        </tr>\n                                )\n\n\n                            }\n                            else if(ref.getStatus(currentProduct.productname,currentProduct.vendorname) === \"Placed\")\n                            {\n\n                                return (\n                                    <tr>\n                                        <td>{currentProduct.vendorname}</td>\n                                        <td>{currentProduct.productname}</td>\n                                        <td>{currentProduct.quantity}</td>\n                                        <td>{ref.getVendorRating(currentProduct.vendorname)}</td>\n                                        <td>Placed</td>  \n                                        <td>0</td>\n                                        <button type=\"button\" onClick={() => this.RateVendor(currentProduct.vendorname,currentProduct.productname)}>RateVendor</button>\n\n\n                                    </tr>\n                                )\n\n\n                            }\n                            else if(ref.getStatus(currentProduct.productname,currentProduct.vendorname) === \"Dispatched\")\n                            {\n\n                                return (\n                                    <tr>\n                                        <td>{currentProduct.vendorname}</td>\n                                        <td>{currentProduct.productname}</td>\n                                        <td>{currentProduct.quantity}</td>\n                                        <td>{ref.getVendorRating(currentProduct.vendorname)}</td>\n                                        <td>Dispatched</td>  \n                                        <td>0</td>\n                                        <button type=\"button\" onClick={() => this.ProductReview(currentProduct.vendorname,currentProduct.productname)}>Review</button>\n\n\n                                    </tr>\n                                )\n                            }\n                            else\n                            {\n                                return (\n                                    <tr>\n                                        <td>{currentProduct.vendorname}</td>\n                                        <td>{currentProduct.productname}</td>\n                                        <td>{currentProduct.quantity}</td>\n                                        <td>{ref.getVendorRating(currentProduct.vendorname)}</td>\n                                        <td>{ref.getStatus(currentProduct.productname,currentProduct.vendorname)}</td>  \n                                        <td>0</td>\n                                    </tr>\n                                )\n                            }\n                        })\n                        }\n                    </tbody>\n                </table>\n            </div>\n            </div>\n        )\n    }\n    getStatus(productname,vendorname)\n    {\n        let st=\"Waiting\";\n        for(var i=0;i<ref.state.all_products.length;i++)\n            {\n                if(ref.state.all_products[i].productname === productname && ref.state.all_products[i].username === vendorname)\n                    st=ref.state.all_products[i].status;\n            }\n        if(st === \"Ready\")\n            st=\"Placed\";\n        return st;\n    }\n    getQuantity(productname,vendorname)\n    {\n        let st=0;\n        for(var i=0;i<ref.state.all_products.length;i++)\n            {\n                if(ref.state.all_products[i].productname === productname && ref.state.all_products[i].username === vendorname)\n                {\n                    st=parseInt(ref.state.all_products[i].quantity)  - parseInt(ref.state.all_products[i].count);\n                    break;\n                }\n            }\n        return st;\n    }\n    getVendorRating(vendorname)\n    {    \n        let ret=0;\n        for(var i=0;i<ref.state.users.length;i++)\n        {\n            if(ref.state.users[i].username === vendorname && ref.state.users[i].type ===\"Vendor\")\n            {\n                let sum=ref.state.users[i].sum;\n                let cnt=ref.state.users[i].count;\n                ret=sum/cnt;\n                break;\n            }\n        }\n        if(ret==0)\n            ret=\"Unrated\";\n        return ret;\n    }\n}"]},"metadata":{},"sourceType":"module"}